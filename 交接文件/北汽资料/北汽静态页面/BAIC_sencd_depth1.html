<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="./font/iconfont.css">
    <link rel="stylesheet" type="text/css" href="./css/common.css">
    <link rel="stylesheet" type="text/css" href="./css/first_depth.css">
    <link rel="stylesheet" type="text/css" href="./css/send.css">
    <title>二级页面</title>
    <style>
        .zm_fillter p span.active{
            color: red;
            text-decoration: underline;
        }
        #car_brand li,#car_manufacturer li,.zm_fillter p span{
            cursor:pointer;
        }
        .details_width{
            width: 22%;
            height: 420px;
            margin-left:0;
            margin-right:0;
        }
    </style>
</head>
<body>
    <!-- 侧边栏 -->
    <div class="rightFiexd">
        <ul>
            <li><a href="javascript:;"><img src="./image/fixed1.png"><p>下载中心</p></a></li>
            <li><a href="javascript:;"><img src="./image/fixed2.png"><p>报告导入</p></a></li>
            <li><a href="javascript:;"><img src="./image/fixed3.png"><p>指标统计</p></a></li>
            <li><a href="javascript:;"><img src="./image/fixed4.png"><p>数据采集管理</p></a></li>
            <li><a href="javascript:;"><img src="./image/fixed5.png"><p>系统管理</p></a></li>
        </ul>
    </div>
    <!-- 公共顶部 -->
    <div class="common_top clearfix">
       <img class="fl" src="./image/logo_small.png">
       <div class="fr">
          <p><span>欢迎您：李毅&nbsp;&nbsp;<a href="#"><i class="icon iconfont icon-shutDown"></i>退出</a></span></p>
          <p class="hidden_p"><i class="icon iconfont icon-weizhi"></i>
            <a href="#">当前位置：</a>
            <a href="./BAIC_login.html">首页</a>
            <i class="icon iconfont icon-jiantou"></i>
            <a href="./BAIC_first_depth.html">汽车品牌</a>
            <i class="icon iconfont icon-jiantou"></i>
            <a href="./BAIC_first_depth.html">汽车车型</a>
          </p>
       </div>
    </div>
    <!-- 公共版心 -->
    <div class="w">
        <!-- 字母筛选 -->
        <div class="zm_fillter common_color zm_fillter-margin">
                <p><i>品牌字母</i><span class="first">A</span><span class="active">B</span><span>C</span><span>D</span><span>E</span><span>F</span><span>G</span><span>H</span><span>I</span><span>J</span><span>K</span><span>L</span><span>M</span><span>N</span><span>O</span><span>P</span><span>Q</span><span>R</span><span >S</span><span>T</span><span>U</span><span>V</span><span>W</span><span>X</span><span>Y</span><span>Z</span></p>
                <div class="manufacturer clearfix">
                    <i>厂商：</i>
                    <ul class="clearfix" id="car_manufacturer">
                         <!-- 模板 -->
                    </ul>
                </div>
                <div class="manufacturer clearfix brand">
                    <i>品牌：</i>
                    <ul class="clearfix" id="car_brand">
                        <!-- 模板 -->
                    </ul>
                </div>
        </div>
  
        <div class="first_depth clearfix">
            <div class="details_wrapper details_width common_color" >
                    <div class="details_title">
                        <h1>论坛综合评分</h1>
                    </div>
                    <div class="first_depth_l fl">
                            <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                                <ul class="layui-tab-title">
                                <li class="layui-this" style="text-align: left;"><a href="#"><span class="active">本品</span></a></li>
                                <li><a href="#"><span>自主</span></a></li>
                                <li  style="text-align: right;"><a href="#"><span>合资</span></a></li>
                                </ul>
                                <div class="layui-tab-content">
                                <div class="layui-tab-item layui-show">
                                    <ol id="ranking">
                                    </ol>
                                </div>
                                <div class="layui-tab-item">
                                    <ol id="ranking1"></ol>
                                </div>
                                <div class="layui-tab-item">
                                    <ol id="ranking2"></ol>
                                </div>
                                </div>
                            </div>   
                        </div>
            </div>
            <div class="first_depth_r common_color fr">
                <div id="main" style="width: 100%;height:100%"></div>
                <div class="send_jingzheng">
                    <p>按竞争关系选择：<input id="send_jingzheng" type="text"><i class="icon iconfont icon-xiajiantou"></i></p>
                    <div class="send_jingzheng_div">
                        <h2>对比车型</h2>
                        <div class="send_car_div_main">
                            <div class="fr">
                                <input type="text"><button class="layui-btn layui-btn-sm layui-btn-normal">搜索</button>
                            </div>
                            <div id="send_jingzheng_div_footer" class="send_car_div_footer send_jingzheng_div_footer">
                                <table class="layui-table">
                                    <colgroup>
                                      <col width="50">
                                      <col width="150">
                                    </colgroup>
                                    <tbody>
                                      <tr>
                                        <td>GL8</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>凯越三厢</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>君威</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>君越</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>昂科拉</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>朗逸</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>英朗</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">艾力绅</a><a href="#">奥德赛</a><a href="#">马自达8</a></td>
                                      </tr>
                                    </tbody>
                                  </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="send_car">
                    <p>按车型选择：<input id="send_car" type="text" readonly ><i class="icon iconfont icon-xiajiantou"></i></p>
                    <div id="send_car_div" class="send_car_div">
                        <h2>车型</h2>
                        <div class="send_car_div_main">
                            <div class="fl">
                                <span>所有车型</span>
                                <select>
                                    <option>微型轿车</option>
                                    <option>微型轿车</option>
                                    <option>微型轿车</option>
                                    <option>微型轿车</option>
                                    <option>微型轿车</option>
                                    <option>微型轿车</option>
                                </select>
                            </div>
                            <div class="fr">
                                <input type="text"><button class="layui-btn layui-btn-sm layui-btn-normal">搜索</button>
                            </div>
                            <div id="send_car_div_footer"  class="send_car_div_footer">
                                <table class="layui-table">
                                    <colgroup>
                                      <col width="50">
                                      <col width="150">
                                    </colgroup>
                                    <tbody>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                      <tr>
                                        <th colspan="2">小型轿车</th>
                                      </tr>
                                      <tr>
                                        <td>A0-H</td>
                                        <td><a href="#">FABIA SCOUT</a><a href="#">K2 三厢</a></td>
                                      </tr>
                                    </tbody>
                                  </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="time_tab send_time_tab">
                    <span class="active">年</span>
                    <span>季</span>
                    <span>月</span>
                </div>
            </div>
        </div>  
        <!-- 下半部分 -->
        <div class="send_depth_bom clearfix">
            <div class="fl common_color">
                <div id="Relation_diagram" class="common_color" style="width: 100%; height: 100%;"></div>
            </div>
            <div class="fr">
                <div id="he_img" class="common_color" style="width: 100%; height: 100%;"></div> 
            </div>
        </div>
    </div>
    </div>
  <!-- 公共底部 -->
<div class="footer">
    <p>&copy;北京汽车研究总院 </p>
    <p>本系统由中科聚网信息技术有限公司提供技术支持</p>
</div>
  <script type="text/javascript" src="./js/jquery.min.js"></script>
  <script type="text/javascript" src="./layui/layui.all.js"></script>
  <script type="text/javascript" src="./js/common.js"></script>
  <script type="text/javascript" src="./js/echarts.min.js"></script>
  <script type="text/javascript" src="./js/datatool.js"></script>
  <!-- <script type="text/javascript" src="./js/a.js"></script> -->
   <script type="text/javascript" src="./json/first1.js"></script>
  <script type="text/javascript" src="./json/send1.js"></script>
  <!--[if lt IE 7]>
      <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
      <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
 <!-- 渲染厂商模板 -->
 <script id="car_manufacturer_template" type="text/html">
    {{# layui.each(d.data,function(index,item) {}}
    
    {{# if(index==14){ }}
        <li class="active">
            <span>{{item.name}}</span>
        </li>
        {{#   }else{ }}
            <li>
                <span>{{item.name}}</span>
            </li>
        {{# } }}
    {{# }); }}
    
</script>
<!-- 渲染厂商模板结束 -->
 <!-- 渲染厂商模板 -->
 <script id="car_brand_template" type="text/html">
    {{# layui.each(d.data,function(index,item) {}}
        {{# if(index==6){ }}
            <li class="active">
                <span>{{item.name}}</span>
            </li>
        {{#   }else{ }}
            <li>
                <span>{{item.name}}</span>
            </li>
        {{# } }}
    {{# }); }}
</script>
<!-- 渲染厂商模板结束 -->
  <script id="first_template" type="text/html">
        <li>
            <a class="textl" href="#">排名</a>
            <a class="textc" href="#">车型</a>
            <a class="textr" href="#">评分</a>
        </li>
        {{# layui.each(d.data,function(index,item) {}}
        <li>
            <a class="textl pl" href="./BAIC_bj.html"><span>{{item.rank}}</span></a>
            <a class="textc" href="./BAIC_bj.html">{{item.name}}</a>
            <a class="textr pr" href="./BAIC_bj.html">{{item.num}}</a>
        </li>
        {{# }); }}
    </script>
   <script type="text/javascript">
       $(function() {
            $('.first_depth_l li').click(function() {
               $('.first_depth_l li').find('span').removeClass('active');
              $(this).find('span').addClass('active');
            })
            //左侧车型 
            $('#send_car_div_footer').on('click','td a',function() {
                var val = $(this).text();
                $('#send_car').val(val);
                $('#send_car_div').hide();
                $('#send_car_div').height(0);
            })
            $('.send_car p').click(function() {
                $('.send_car_div').animate({
                    height:'350px'
                },1000).show();
                $('.send_jingzheng_div').hide();
            })
            // 右侧竞争关系
            $('#send_jingzheng_div_footer').on('click','td a',function() {
                var val = $(this).text();
                $('#send_jingzheng').val(val);
                $('.send_jingzheng_div').hide();
                $('.send_jingzheng_div').height(0);
            })
            $('.send_jingzheng p').click(function() {
                $('.send_jingzheng_div').animate({
                    height:'350px'
                },1000).show();
                $('#send_car_div').hide();
            })
       })
   </script>
  <script type="text/javascript">
        $('#car_manufacturer li:nth-type(15)').addClass('active');
      
        //layui全局对象
      var laydate = layui.laydate //日期
          ,laypage = layui.laypage //分页
          ,layer = layui.layer //弹层
          ,table = layui.table //表格
          ,laytpl = layui.laytpl;
    //左侧排名sss
    laytpl($("#first_template").html()).render(paimings2, function(html){
            $("#ranking").html(html)
    })
    laytpl($("#first_template").html()).render(paimings, function(html){
            $("#ranking1").html(html)
    })
    laytpl($("#first_template").html()).render(paimings1, function(html){
            $("#ranking2").html(html)
    })
    // 厂商渲染
    laytpl($("#car_brand_template").html()).render(car_brand, function(html){
            $("#car_brand").html(html)
    })
    // 品牌
    laytpl($("#car_manufacturer_template").html()).render(car_manufacturer, function(html){
            $("#car_manufacturer").html(html)
    })
      var myChart = echarts.init(document.getElementById('main'));
      // 关系图
      // var Relation_diagram = echarts.init(document.getElementById('Relation_diagram'));
        // 指定图表的配置项和数据
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(car_dian_fn(data22));
        // 关系图
      var he_img = echarts.init(document.getElementById('he_img'));
      he_img.setOption(he_fn(he_data.compoted,he_data.data_title,"北京BJ40-指标分布图",he_data.scatter_data));
    //盒须图结束 
    //竞争关系图
    var graph_s = echarts.init(document.getElementById('Relation_diagram'));
    graph_s.setOption(graph_fn(graph_data.text,graph_data.graph));
//盒须图
 function he_fn(compoted,data_title,option_title_text,scatter_data) {
    var data = echarts.dataTool.prepareBoxplotData(compoted)  
    var he_option = {
        title: [
            {
                text: option_title_text,
                left:20,
                top:10
            },
        ],
        tooltip: {
            trigger: 'item',
            axisPointer: {
                type: 'shadow'
            }
        },
        grid: {
            left: '5%',
            right: '5%',
            bottom: '25%'
        },
        xAxis: {
            type: 'category',
            data: data_title,
            boundaryGap: true,
            splitArea: {
                show: true
            },
            axisLabel:{
                  interval: 0,
                  rotate:50,
                 textStyle: {
                    color: '#101010'
                }

            },
            splitLine: {
                show: false
            }
        },
        yAxis: {
            type: 'value',
            splitLine: {
                show: false
            }
        },
        series: [
            {
                type: 'boxplot',
                color:'#f62929',
                itemStyle:{
                borderColor:'#f62929',
                color:{
                    type: 'linear',
                    x: 1,
                    y: 0,
                    x2: 1,
                    y2: 0.35,
                    colorStops: [
                        {
                            offset: 1, color: '#318ae4' // 0% 处的颜色
                        },
                        {
                        offset: 1, color: '#71aeed' // 100% 处的颜色
                        }
                    ],
                    globalCoord: false // 缺省为 false
                    }
                },
                data: data.boxData,
                tooltip: {
                    show:false
                }
            },
            {
                type: 'scatter',
                color:'#f62929',
                zlevel:1,
                data: scatter_data
            }
        ]
    };
    return he_option;
 }
 //竞争关系图
function graph_fn(text,graph) {
    var categories = [];
    for (var i = 0; i < 9; i++) {
        categories[i] = {
            name: '类目' + i
        };
    }
    graph.nodes.forEach(function (node) {
        node.itemStyle = null;
        node.value = node.symbolSize;
        node.symbolSize /= 3;
        node.label = {
            normal: {
                show: node.symbolSize > 15
            }
        };
        node.category = node.attributes.modularity_class;
    });
    var graph_option = {
        title: {
            text: text,
            top: '10',
            left: '20'
        },
        series : [
            {
                name: 'Les Miserables',
                type: 'graph',
                layout: 'none',
                data: graph.nodes,
                links: graph.links,
                categories: categories,
                roam: true,
                focusNodeAdjacency: true,
                itemStyle: {
                    normal: {
                        borderColor: '#fff',
                        borderWidth: 1,
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.3)'
                    }
                },
                label: {
                    position: 'bottom',
                    fontSize:14,
                    z:3,
                    formatter: '{b}'
                },
                lineStyle: {
                    color: 'source',
                    curveness: 0.3
                },
                emphasis: {
                    lineStyle: {
                        width: 10
                    }
                }
            }
        ]
    }; 
    return graph_option;
}
// 指定图表的配置项和数据
function car_dian_fn(car_dian_data) {
     option = {
          backgroundColor: new echarts.graphic.RadialGradient(0.3, 0.3, 0.8, [{
              offset: 0,
              color: 'rgba(255, 255, 255,0.1)'
          }, {
              offset: 1,
              color: 'rgba(255, 255, 255,0.1)'
          }]),
          textStyle:
              {color:'#000'},
          title: {
              text: '中国汽车市场竞争分析图',
              left: 'center',
              top:12,
            //   textStyle: {
            //       color:'#000',
            //       fontWeight: 'bold',
            //       fontSize: 16
            //   }
          },
          legend: {
              right: 100,
              top:50,
              data: ['北汽子品牌','其他品牌'],
              textStyle: {
                  color: '#000',
                  fontSize: 12
              }
          },
           toolbox: {
              show: true,
              right:20,
              feature: {
                dataView: {
                  readOnly: true,
                     icon:'image://image/save_data.png'
                  },
                  saveAsImage: {
                     icon:'image://image/save_img.png'
                  }
              }
          },
          xAxis: {
              axisLine: {
                  lineStyle: {
                      color: 'rgba(0, 0, 0,0.38)'
                  }
              },
              splitLine: {
                  show: false
              }
          },
          yAxis: {
                  axisLine: {
                  lineStyle: {
                      color: 'rgba(0, 0, 0,0.38)'
                  }
              },
                  splitLine: {
                  show: false
              },
              scale: true
          },
          dataZoom: [
              {
                  type: 'slider',
                  show: true,
                  xAxisIndex: [0],
                  start: 0,
                  end: 5
              },
              {
                  type: 'slider',
                  show: true,
                  yAxisIndex: [0],
                  left: '93%',
                  start: 0,
                  end: 100
              },
              {
                  type: 'inside',
                  xAxisIndex: [0],
                  start: 0,
                  end: 10
              },
              {
                  type: 'inside',
                  yAxisIndex: [0],
                  start: 29,
                  end: 100
              }
          ],
          series: [{
              name: '北汽子品牌',
              data: car_dian_data[0],
              type: 'scatter',
              label: {
                  emphasis: {
                      show: true,
                      formatter: function (param) {
                          return param.data[3];
                      },
                      position: 'top'
                  }
              },
              itemStyle: {
                  normal: {
                      shadowBlur: 10,
                      shadowColor: 'rgba(120, 36, 50, 0.5)',
                      shadowOffsetY: 5,
                      color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                          offset: 0,
                          color: 'rgb(251, 118, 123)'
                      }, {
                          offset: 1,
                          color: 'rgb(204, 46, 72)'
                      }])
                  }
              }
          }, {
              name: '其他品牌',
              data: car_dian_data[1],
              type: 'scatter',
              label: {
                  emphasis: {
                      show: true,
                      formatter: function (param) {
                          return param.data[3];
                      },
                      position: 'top'
                  }
              },
              itemStyle: {
                  normal: {
                      shadowBlur: 10,
                      shadowColor: 'rgba(25, 100, 150, 0.5)',
                      shadowOffsetY: 5,
                      color: new echarts.graphic.RadialGradient(0.4, 0.3, 1, [{
                          offset: 0,
                          color: 'rgb(129, 227, 238)'
                      }, {
                          offset: 1,
                          color: 'rgb(25, 183, 207)'
                      }])
                  }
              }
          }]
      };
      return option;
}
function bindEvent() {
    $('.zm_fillter p span').click(function () {
        console.log($(this));
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    })
    $('#car_manufacturer li').click(function () {
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    })
    $('#car_brand li').click(function () {
        $(this).addClass('active');
        $(this).siblings().removeClass('active');
    })
}
bindEvent();
</script>
</body>
</html>